



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation">
      
      
        <meta name="author" content="Percona LLC">
      
      
        <link rel="canonical" href="https://docs.percona.com/percona-xtradb-cluster-docs/8.0/8.0/howtos/proxysql-v2.html">
      
      <link rel="icon" href="../_static/percona_favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.9">
    
    
      
        <title>The proxysql-admin Tool with ProxySQL v2 - Percona XtraDB Cluster</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.3/css/line.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/percona.css">
    
      <link rel="stylesheet" href="../css/version-select.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-343802-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="percona-light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-proxysql-admin-tool-with-proxysql-v2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://percona.com/software/documentation" class="md-header__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis"><a href="https://www.percona.com/software/documentation">
            Percona Product Documentation
          </a></span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The proxysql-admin Tool with ProxySQL v2
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="percona-light" data-md-color-primary="" data-md-color-accent="" type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="" type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Percona XtraDB Cluster" class="md-nav__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    Percona XtraDB Cluster
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0 Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro.html" class="md-nav__link">
        About Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../limitation.html" class="md-nav__link">
        Percona XtraDB Cluster Limitations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        Quick Start Guide for Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/index.html" class="md-nav__link">
        Installing Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure.html" class="md-nav__link">
        Configuring Nodes for Write-Set Replication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap.html" class="md-nav__link">
        Bootstrapping the First Node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../add-node.html" class="md-nav__link">
        Adding Nodes to Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../verify.html" class="md-nav__link">
        Verifying Replication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Features" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../features/highavailability.html" class="md-nav__link">
        High Availability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../features/pxc-strict-mode.html" class="md-nav__link">
        PXC Strict Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../features/online-schema-upgrade.html" class="md-nav__link">
        Online Schema Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../features/nbo.html" class="md-nav__link">
        Non-Blocking Operations (NBO) method for Online Scheme Upgrades (OSU)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          PXC Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PXC Security" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          PXC Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/index.html" class="md-nav__link">
        Security Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/secure-network.html" class="md-nav__link">
        Securing the Network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/encrypt-traffic.html" class="md-nav__link">
        Encrypting PXC Traffic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/apparmor.html" class="md-nav__link">
        Enabling AppArmor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/selinux.html" class="md-nav__link">
        Enabling SELinux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          User's Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User's Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          User's Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/state_snapshot_transfer.html" class="md-nav__link">
        State Snapshot Transfer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/xtrabackup_sst.html" class="md-nav__link">
        Percona XtraBackup SST Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/restarting_nodes.html" class="md-nav__link">
        Restarting the cluster nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/failover.html" class="md-nav__link">
        Cluster Failover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/monitoring.html" class="md-nav__link">
        Monitoring the cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/certification.html" class="md-nav__link">
        Certification in Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/threading_model.html" class="md-nav__link">
        Percona XtraDB Cluster threading model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/gcache_record-set_cache_difference.html" class="md-nav__link">
        Understanding GCache and Record-Set Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/performance_schema_instrumentation.html" class="md-nav__link">
        Perfomance Schema Instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../management/data_at_rest_encryption.html" class="md-nav__link">
        Data at Rest Encryption
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          How-tos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How-tos" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          How-tos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="upgrade_guide.html" class="md-nav__link">
        Upgrading Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="crash-recovery.html" class="md-nav__link">
        Crash Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="centos_howto.html" class="md-nav__link">
        Configuring Percona XtraDB Cluster on CentOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ubuntu_howto.html" class="md-nav__link">
        Configuring Percona XtraDB Cluster on Ubuntu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="garbd_howto.html" class="md-nav__link">
        Setting up Galera Arbitrator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="singlebox.html" class="md-nav__link">
        How to set up a three-node cluster on a single box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="3nodesec2.html" class="md-nav__link">
        How to set up a three-node cluster in EC2 environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="haproxy.html" class="md-nav__link">
        Load balancing with HAProxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="proxysql.html" class="md-nav__link">
        Load balancing with ProxySQL
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          The proxysql-admin Tool with ProxySQL v2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="proxysql-v2.html" class="md-nav__link md-nav__link--active">
        The proxysql-admin Tool with ProxySQL v2
      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary-of-changes-in-proxysql-admin-tool-with-proxysql-v2" class="md-nav__link">
    Summary of Changes in proxysql-admin Tool with ProxySQL v2
  </a>
  
    <nav class="md-nav" aria-label="Summary of Changes in proxysql-admin Tool with ProxySQL v2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#added-features" class="md-nav__link">
    Added Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changed-features" class="md-nav__link">
    Changed Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-features" class="md-nav__link">
    Removed Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-proxysql-v2" class="md-nav__link">
    Installing ProxySQL v2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-configuration" class="md-nav__link">
    Automatic Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-configuration-file" class="md-nav__link">
    Preparing Configuration File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-proxysql-admin-login" class="md-nav__link">
    Configuring the ProxySQL Admin Login
  </a>
  
    <nav class="md-nav" aria-label="Configuring the ProxySQL Admin Login">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-the-proxysql-admin-file" class="md-nav__link">
    Example of the ProxySQL Admin File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-login-file" class="md-nav__link">
    Creating the login file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-login-file" class="md-nav__link">
    Verifying the login-file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-proxysql-admin-tool" class="md-nav__link">
    Running proxysql-admin tool
  </a>
  
    <nav class="md-nav" aria-label="Running proxysql-admin tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable" class="md-nav__link">
    –enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable" class="md-nav__link">
    –disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adduser" class="md-nav__link">
    –adduser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncusers" class="md-nav__link">
    –syncusers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-proxysql-db" class="md-nav__link">
    From ProxySQL DB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-pxc" class="md-nav__link">
    From PXC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync-multi-cluster-users" class="md-nav__link">
    –sync-multi-cluster-users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-query-rule" class="md-nav__link">
    –add-query-rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-demo" class="md-nav__link">
    –quick-demo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-cluster" class="md-nav__link">
    –update-cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-enabled" class="md-nav__link">
    –is-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    –status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#force" class="md-nav__link">
    –force
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-mysql-version" class="md-nav__link">
    –update-mysql-version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-options" class="md-nav__link">
    Extra options
  </a>
  
    <nav class="md-nav" aria-label="Extra options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode" class="md-nav__link">
    –mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singlewrite-mode-setup" class="md-nav__link">
    singlewrite mode setup:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbal-mode-setup" class="md-nav__link">
    loadbal mode setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-check-interval" class="md-nav__link">
    –node-check-interval
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-node" class="md-nav__link">
    –write-node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxysql-status" class="md-nav__link">
    ProxySQL Status
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="virt_sandbox.html" class="md-nav__link">
        Setting up a testing environment with ProxySQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Release notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Release notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/release-notes_index.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0 Release notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/8.0.29-21.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.29-21 (2022-09-12)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.28-19.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.28-19.1 (2022-07-19)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.27-18.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.27-18.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.26-16.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.26-16.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.25-15.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.25-15.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.23-14.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.23-14.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.22-13.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.22-13.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.21-12.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.21-12.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.3.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.2.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.19-10.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.19-10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.18-9.3.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.18-9.3
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="References" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-status-index.html" class="md-nav__link">
        Index of wsrep status variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-system-index.html" class="md-nav__link">
        Index of wsrep system variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-provider-index.html" class="md-nav__link">
        Index of wsrep_provider options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-files-index.html" class="md-nav__link">
        Index of files created by PXC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../copyright-and-licensing-information.html" class="md-nav__link">
        Copyright and licensing information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trademark-policy.html" class="md-nav__link">
        Trademark policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
   <label class="md-nav__title" for="__drawer">
    <a href="https://learn.percona.com/download-percona-xtradb-cluster-8-manual" onclick="_gaq.push(['b._trackEvent', 'Percona XtraBackup', 'Download', 'Download Manual Percona XtraBackup']);" class="md-nav__link md-nav__link--active">
      Download PDF
    </a>
  </label> 
  </ul>
</nav>

                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary-of-changes-in-proxysql-admin-tool-with-proxysql-v2" class="md-nav__link">
    Summary of Changes in proxysql-admin Tool with ProxySQL v2
  </a>
  
    <nav class="md-nav" aria-label="Summary of Changes in proxysql-admin Tool with ProxySQL v2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#added-features" class="md-nav__link">
    Added Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changed-features" class="md-nav__link">
    Changed Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-features" class="md-nav__link">
    Removed Features
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-proxysql-v2" class="md-nav__link">
    Installing ProxySQL v2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-configuration" class="md-nav__link">
    Automatic Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-configuration-file" class="md-nav__link">
    Preparing Configuration File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-proxysql-admin-login" class="md-nav__link">
    Configuring the ProxySQL Admin Login
  </a>
  
    <nav class="md-nav" aria-label="Configuring the ProxySQL Admin Login">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-the-proxysql-admin-file" class="md-nav__link">
    Example of the ProxySQL Admin File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-login-file" class="md-nav__link">
    Creating the login file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-login-file" class="md-nav__link">
    Verifying the login-file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-proxysql-admin-tool" class="md-nav__link">
    Running proxysql-admin tool
  </a>
  
    <nav class="md-nav" aria-label="Running proxysql-admin tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable" class="md-nav__link">
    –enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable" class="md-nav__link">
    –disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adduser" class="md-nav__link">
    –adduser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncusers" class="md-nav__link">
    –syncusers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-proxysql-db" class="md-nav__link">
    From ProxySQL DB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-pxc" class="md-nav__link">
    From PXC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sync-multi-cluster-users" class="md-nav__link">
    –sync-multi-cluster-users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-query-rule" class="md-nav__link">
    –add-query-rule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-demo" class="md-nav__link">
    –quick-demo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-cluster" class="md-nav__link">
    –update-cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-enabled" class="md-nav__link">
    –is-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    –status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#force" class="md-nav__link">
    –force
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-mysql-version" class="md-nav__link">
    –update-mysql-version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-options" class="md-nav__link">
    Extra options
  </a>
  
    <nav class="md-nav" aria-label="Extra options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode" class="md-nav__link">
    –mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singlewrite-mode-setup" class="md-nav__link">
    singlewrite mode setup:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loadbal-mode-setup" class="md-nav__link">
    loadbal mode setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-check-interval" class="md-nav__link">
    –node-check-interval
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#write-node" class="md-nav__link">
    –write-node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proxysql-status" class="md-nav__link">
    ProxySQL Status
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                <!-- Edit button -->
                
                  <a
                    href="https://github.com/percona/pxc-docs/edit/8.0/docs/howtos/proxysql-v2.md"
                    title="Edit this page"
                    class="md-content__button md-icon"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
                  </a>
                

                <!--
                  Hack: check whether the content contains a h1 headline. If it
                  doesn't, the page title (or respectively site name) is used
                  as the main headline.
                -->
                

                <!-- Markdown content -->
                <h1 id="the-proxysql-admin-tool-with-proxysql-v2">The proxysql-admin Tool with ProxySQL v2<a class="headerlink" href="#the-proxysql-admin-tool-with-proxysql-v2" title="Permanent link">&para;</a></h1>
<p>With ProxySQL 2.0.3, the <code>proxysql-admin</code> tool now uses the native ProxySQL
support for Percona XtraDB Cluster and does not require custom bash scripts to keep track of
Percona XtraDB Cluster status. As a result, <code>proxysql_galera_checker</code> and
<code>proxysql_node_monitor</code> have been removed.</p>
<h2 id="summary-of-changes-in-proxysql-admin-tool-with-proxysql-v2">Summary of Changes in <code>proxysql-admin</code> Tool with ProxySQL v2<a class="headerlink" href="#summary-of-changes-in-proxysql-admin-tool-with-proxysql-v2" title="Permanent link">&para;</a></h2>
<h3 id="added-features">Added Features<a class="headerlink" href="#added-features" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>New option <code>--use-ssl</code> to use SSL for connections between ProxySQL and the backend database servers</p>
</li>
<li>
<p>New option <code>--max-transactions-behind</code> to determine the maximum number of writesets that can be queued before the node is SHUNNED to avoid stale reads. The default value is 100</p>
</li>
<li>
<p>New operation <code>--update-cluster</code> to update the cluster membership by adding server nodes as found. (Note that nodes are added but not removed).  The <code>--writer-hg</code> option may be used to specify which Galera hostgroup to update. The <code>--remove-all-servers</code> option instructs to remove all servers from the mysql_servers table before updating the cluster.</p>
</li>
<li>
<p>Hostgroups can be specified on the command-line: <code>--writer-hg</code>, <code>--reader-hg</code>, <code>--backup-writer-hg</code>, and <code>--offline-hg</code>.
Previously, these host groups were only read from the configuration file.</p>
</li>
<li>
<p>The <code>--enable</code> and <code>--update-cluster</code> options used simultaneously have special meaning. If the cluster has not been enabled, then <code>--enable</code> is run.  If the cluster has already been enabled, then <code>--update-cluster</code> is run.</p>
</li>
<li>
<p>New command <code>--is-enabled</code> to see if a cluster has been enabled. This command checks for the existence of a row in the mysql_galera_hostgroups table.  The <code>--writer-hg</code> option may be used to specify the writer hostgroup used to search the mysql_galera_hostgroups table.</p>
</li>
<li>
<p>New command <code>--status</code> to display galera hostgroup information. This command lists all rows in the current <code>mysql_galera_hostgroups</code> table as well as all servers that belong to these hostgroups.  With the <code>--writer-hg</code> option, only the information for the galera hostgroup with that writer hostgroup is displayed.</p>
</li>
<li>
<p>New option <code>--login-file</code> reads login credentials from an encrypted file. If the <code>--login-password</code> or <code>login-password-file</code> options are not specified, the user is prompted for the password.</p>
</li>
<li>
<p>New option <code>--login-password</code> is the key used to decrypt the encrypted login-file. You cannot use the option with the <code>--login-password-file</code>.</p>
</li>
<li>
<p>New option <code>--login-password-file</code> reads the key from a file using the specified path. You cannot use the option with <code>login-password</code>.</p>
</li>
</ul>
<h3 id="changed-features">Changed Features<a class="headerlink" href="#changed-features" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Setting <code>--node-check-interval</code> changes the ProxySQL global variable
<code>mysql-monitor_galera_healthcheck_interval</code>. Note that this is a global
variable, not a per-cluster variable.</p>
</li>
<li>
<p>The option <code>--write-node</code> takes only a single address as a parameter. In the
singlewrite mode we only set the weight if <code>--write-node</code> specifies
<em>address:port</em>.  A priority list of addresses is no longer accepted.</p>
</li>
<li>
<p>The option <code>--writers-as-readers</code> option accepts a different set of
values. Due to changes in the behavior of ProxySQL between version 1.4 and
version 2.0 related to Galera support, the values of <code>--writers-as-readers</code>
have been changed.  This option accepts the following values: yes, no, and
backup.</p>
</li>
<li>
<p><strong>yes</strong></p>
<p>writers, backup-writers, and read-only nodes can act as readers.</p>
</li>
<li>
<p><strong>no</strong></p>
<p>only read-only nodes can act as readers.</p>
</li>
<li>
<p><strong>backup</strong></p>
<p>only backup-writers can act as readers.</p>
</li>
<li>
<p>The commands <code>--syncusers</code>, <code>--sync-multi-cluster-users</code>, <code>--adduser</code>,
and <code>--disable</code> can use the <code>--writer-hg</code> option.</p>
</li>
<li>
<p>The command <code>--disable</code> removes all users associated with the galera cluster
hostgroups. Previously, this command only removed the users with the
<strong>CLUSTER_APP_USERNAME</strong>.</p>
</li>
<li>
<p>The command <code>--disable</code> accepts the <code>--writer-hg</code> option to disable the
Galera cluster associated with that hostgroup overriding the value specified
in the configuration file.</p>
</li>
</ul>
<h3 id="removed-features">Removed Features<a class="headerlink" href="#removed-features" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Asynchronous replica reader support has been removed: the <code>--include-slaves</code>
option is not supported.</p>
</li>
<li>
<p>A list of nodes in the priority order is not supported in ProxySQL v2. Only
a single node is supported at this time.</p>
</li>
<li>
<p>Since the galera_proxysql_checker and galera_node_monitor scripts are no
longer run in the scheduler, automatic cluster membership updates are not
supported.</p>
</li>
<li>
<p>Checking the pxc_maint_mode variable is no longer supported</p>
</li>
<li>
<p>Using desynced nodes if no other nodes are available is no longer supported.</p>
</li>
<li>
<p>The server status is no longer maintained in the mysql_servers table.</p>
</li>
</ul>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<ul>
<li>With <code>--writers-as-readers=backup</code> read-only nodes are not allowed. This a
limitation of ProxySQL 2.0.  Note that backup is the default value of
<code>--writers-as-readers</code> when <code>--mode=singlewrite</code></li>
</ul>
<h2 id="installing-proxysql-v2">Installing ProxySQL v2<a class="headerlink" href="#installing-proxysql-v2" title="Permanent link">&para;</a></h2>
<p>If that is what you used to <a href="../install/index.html#install">install PXC</a> or any other Percona
software, run the corresponding command:</p>
<ul>
<li>Installing on Debian or Ubuntu:</li>
</ul>
<div class="highlight"><pre><span></span><code>$ sudo apt install proxysql2
</code></pre></div>
<ul>
<li>Installing on Red Hat Enterprise Linux or CentOS:</li>
</ul>
<div class="highlight"><pre><span></span><code>$ sudo yum install proxysql2
</code></pre></div>
<p>Alternatively, you can download the packages from
<a href="https://www.percona.com/downloads/proxysql2/">https://www.percona.com/downloads/proxysql2/</a>, if you cannot use either an apt or yum package.</p>
<p>As of ProxySQL 2.0.15 and later, the multiple tarball files are combined into the following files:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>proxysql-2.X.XX-Linux-x86_64.glibc2.12.tar.gz</td>
<td>For every supported operating system but <code>xenial</code> For CentOS 7, install OpenSSL 1.1.1, if needed.</td>
</tr>
<tr>
<td>proxysql-2.X.XX-Linux-x86_64.glibc2.23.xenial.tar.gz</td>
<td>For Ubuntu 16.04 <code>xenial</code> only</td>
</tr>
</tbody>
</table>
<p>The password-based file encryption requires OpenSSL 1.1.1, but Ubuntu 16.04 does not support this OpenSSL version. A special statically linked OpenSSL 1.1.1 binary is packaged with the executable. This packaged binary avoids conflicts with the system OpenSSL and any shared libraries. Each new release rebuilds the binary.</p>
<p>For versions 2.0.13 or lower, extract the files from the archive and change to the directory that contains the extracted files:</p>
<div class="highlight"><pre><span></span><code>$ # Extract the files (assuming you have changed to the download destination directory)
$ tar xzf proxysql-VERSION-Linux-PLATFORM-ARCHITECTURE*.tar.gz
$ # Change to the directory that contains the extracted files
$ cd proxysql-VERSION-Linux-PLATFORM-ARCHITECTURE
</code></pre></div>
<p>To start ProxySQL, run the following command:</p>
<div class="highlight"><pre><span></span><code>$ sudo service proxysql2 start
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Do not run ProxySQL with default credentials in production.</strong></p>
<p>Before starting the <code>proxysql</code> service, you can change the defaults in the <code>/etc/proxysql.cnf</code> file by changing the <code>admin_credentials</code> variable.  For more information, see <a href="https://github.com/sysown/proxysql/blob/master/doc/global_variables.md">Global Variables</a>.</p>
</div>
<h2 id="automatic-configuration">Automatic Configuration<a class="headerlink" href="#automatic-configuration" title="Permanent link">&para;</a></h2>
<p>The <code>proxysql2</code> package from Percona includes the <code>proxysql-admin</code> tool for
configuring Percona XtraDB Cluster nodes with ProxySQL.</p>
<p>Before using the <code>proxysql-admin</code> tool, ensure that ProxySQL and Percona XtraDB Cluster nodes
you want to add are running. For security purposes, please ensure to change the
default user settings in the ProxySQL configuration file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>proxysql-admin tool</code> can only be used for initial ProxySQL configuration.</p>
<p>The ProxySQL Admin (proxysql-admin tool) is specially developed by Percona to automate this configuration. Bug reports and feature proposals are welcome in the ProxySQL Admin <a href="https://jira.percona.com/projects/PSQLADM/issues/PSQLADM-331?filter=allopenissues">issue tracking system</a>.</p>
</div>
<p>To view the usage information, run <code>proxysql-admin</code> without any options:</p>
<div class="highlight"><pre><span></span><code>Usage: proxysql-admin [ options ]

Options:

--config-file=&lt;config-file&gt;        Read login credentials from a configuration file
                                   (command line and login-file options override any configuration file values)

--login-file=&lt;login-file-path&gt;     Read login credentials from an encrypted
                                   file. If the --login-password or --login-password-file options are not specified, the user is prompted for the password. Command line options override any login login file values.

--login-password=&lt;password&gt;        The key used to decrypt the encrypted
                                   login-file. This option cannot be used with --login-password-file.

--login-password-file=&lt;path&gt;       Reads the key from a file using the
                                   &lt;path&gt;. This option cannot be used with --login-password.

--writer-hg=&lt;number&gt;               The hostgroup that all traffic will be sent to
                                   by default. Nodes that have &#39;read-only=0&#39; in MySQL
                                   will be assigned to this hostgroup.
--backup-writer-hg=&lt;number&gt;        If the cluster has multiple nodes with &#39;read-only=0&#39;
                                   and max_writers set, then additional nodes (in excess
                                   of max_writers), will be assigned to this hostgroup.
--reader-hg=&lt;number&gt;               The hostgroup that read traffic should be sent to.
                                   Nodes with &#39;read-only=0&#39; in MySQL will be assigned
                                   to this hostgroup.
--offline-hg=&lt;number&gt;              Nodes that are determined to be OFFLINE will
                                   assigned to this hostgroup.

--proxysql-datadir=&lt;datadir&gt;       Specify the proxysql data directory location
--proxysql-username=&lt;user_name&gt;    ProxySQL service username
--proxysql-password[=&lt;password&gt;]   ProxySQL service password
--proxysql-port=&lt;port_num&gt;         ProxySQL service port number
--proxysql-hostname=&lt;host_name&gt;    ProxySQL service hostname

--cluster-username=&lt;user_name&gt;     Percona XtraDB Cluster node username
--cluster-password[=&lt;password&gt;]    Percona XtraDB Cluster node password
--cluster-port=&lt;port_num&gt;          Percona XtraDB Cluster node port number
--cluster-hostname=&lt;host_name&gt;     Percona XtraDB Cluster node hostname

--cluster-app-username=&lt;user_name&gt; Percona XtraDB Cluster node application username
--cluster-app-password[=&lt;password&gt;] Percona XtraDB Cluster node application password
--without-cluster-app-user         Configure Percona XtraDB Cluster without application user

--monitor-username=&lt;user_name&gt;     Username for monitoring Percona XtraDB Cluster nodes through ProxySQL
--monitor-password[=&lt;password&gt;]    Password for monitoring Percona XtraDB Cluster nodes through ProxySQL
--use-existing-monitor-password    Do not prompt for a new monitor password if one is provided.

--node-check-interval=&lt;NUMBER&gt;     The interval at which the proxy should connect
                                   to the backend servers in order to monitor the
                                   Galera staus of a node (in milliseconds).
                                   (default: 5000)
--mode=[loadbal|singlewrite]       ProxySQL read/write configuration mode
                                   currently supporting: &#39;loadbal&#39; and &#39;singlewrite&#39;
                                   (default: &#39;singlewrite&#39;)
--write-node=&lt;IPADDRESS&gt;:&lt;PORT&gt;    Specifies the node that is to be used for
                                   writes for singlewrite mode.  If left unspecified,
                                   the cluster node is then used as the write node.
                                   This only applies when &#39;mode=singlewrite&#39; is used.
--max-connections=&lt;NUMBER&gt;         Value for max_connections in the mysql_servers table.
                                   This is the maximum number of connections that
                                   ProxySQL will open to the backend servers.
                                   (default: 1000)
--max-transactions-behind=&lt;NUMBER&gt; Determines the maximum number of writesets a node
                                   can have queued before the node is SHUNNED to avoid
                                   stale reads.
                                   (default: 100)
--use-ssl=[yes|no]                 If set to &#39;yes&#39;, then connections between ProxySQL
                                   and the backend servers will use SSL.
                                   (default: no)
--writers-are-readers=[yes|no|backup]
                                   If set to &#39;yes&#39;, then all writers (backup-writers also)
                                   are added to the reader hostgroup.
                                   If set to &#39;no&#39;, then none of the writers (backup-writers also)
                                   will be added to the reader hostgroup.
                                   If set to &#39;backup&#39;, then only the backup-writers
                                   will be added to the reader hostgroup.
                                   (default: backup)
--remove-all-servers               When used with --update-cluster, this will remove all
                                   servers belonging to the current cluster before
                                   updating the list.
--debug                            Enables additional debug logging.
--help                             Displays this help text.

These options are the possible operations for proxysql-admin.
One of the options below must be provided.
--adduser                          Adds the Percona XtraDB Cluster application user to the ProxySQL database
--disable, -d                      Remove any Percona XtraDB Cluster configurations from ProxySQL
--enable, -e                       Auto-configure Percona XtraDB Cluster nodes into ProxySQL
--update-cluster                   Updates the cluster membership, adds new cluster nodes
                                   to the configuration.
--update-mysql-version             Updates the `mysql-server_version` variable in ProxySQL with the version
                                   from a node in the cluster.
--quick-demo                       Setup a quick demo with no authentication
--syncusers                        Sync user accounts currently configured in MySQL to ProxySQL
                                   May be used with --enable.
                                   (deletes ProxySQL users not in MySQL).

--sync-multi-cluster-users         Sync user accounts currently configured in MySQL to ProxySQL
                                   May be used with --enable.
                                   (doesn&#39;t delete ProxySQL users not in MySQL)
--add-query-rule                   Create query rules for synced mysql user. This is applicable only
                                   for singlewrite mode and works only with --syncusers
                                   and --sync-multi-cluster-users options
--is-enabled                       Checks if the current configuration is enabled in ProxySQL.
--status                           Returns a status report on the current configuration.
                                   If &quot;--writer-hg=&lt;NUM&gt;&quot; is specified, than the
                                   data corresponding to the galera cluster with that
                                   writer hostgroup is displayed. Otherwise, information
                                   for all clusters will be displayed.
--force                            This option will skip existing configuration checks in mysql_servers,
                                   mysql_users and mysql_galera_hostgroups tables. This option will only
                                   work with ``proxysql-admin --enable``.
--disable-updates                  Disable admin updates for ProxySQL cluster for the
                                   current operation. The default is to not change the
                                   admin variable settings.  If this option is specified,
                                   these options will be set to false.
                                   (default: updates are not disabled)
--version, -v                      Prints the version info
</code></pre></div>
<h2 id="preparing-configuration-file">Preparing Configuration File<a class="headerlink" href="#preparing-configuration-file" title="Permanent link">&para;</a></h2>
<p>It is recommended to provide the connection and authentication information in
the ProxySQL configuration file (<code>/etc/proxysql-admin.cnf</code>). Do not
specify this information on the command line.</p>
<p>By default, the configuration file contains the following:</p>
<div class="highlight"><pre><span></span><code># proxysql admin interface credentials.
export PROXYSQL_DATADIR=&#39;/var/lib/proxysql&#39;
export PROXYSQL_USERNAME=&#39;admin&#39;
export PROXYSQL_PASSWORD=&#39;admin&#39;
export PROXYSQL_HOSTNAME=&#39;localhost&#39;
export PROXYSQL_PORT=&#39;6032&#39;

# PXC admin credentials for connecting to pxc-cluster-node.
export CLUSTER_USERNAME=&#39;admin&#39;
export CLUSTER_PASSWORD=&#39;admin&#39;
export CLUSTER_HOSTNAME=&#39;localhost&#39;
export CLUSTER_PORT=&#39;3306&#39;

# proxysql monitoring user. proxysql admin script will create this user in pxc to monitor pxc-nodes.
export MONITOR_USERNAME=&quot;monitor&quot;
export MONITOR_PASSWORD=&quot;monit0r&quot;

# Application user to connect to pxc-node through proxysql
export CLUSTER_APP_USERNAME=&quot;proxysql_user&quot;
export CLUSTER_APP_PASSWORD=&quot;passw0rd&quot;

# ProxySQL hostgroup IDs
export WRITER_HOSTGROUP_ID=&#39;10&#39;
export READER_HOSTGROUP_ID=&#39;11&#39;
export BACKUP_WRITER_HOSTGROUP_ID=&#39;12&#39;
export OFFLINE_HOSTGROUP_ID=&#39;13&#39;

# ProxySQL read/write configuration mode.
export MODE=&quot;singlewrite&quot;

# max_connections default (used only when INSERTing a new mysql_servers entry)
export MAX_CONNECTIONS=&quot;1000&quot;

# Determines the maximum number of writesets a node can have queued
# before the node is SHUNNED to avoid stale reads.
export MAX_TRANSACTIONS_BEHIND=100

# Connections to the backend servers (from ProxySQL) will use SSL
export USE_SSL=&quot;no&quot;

# Determines if a node should be added to the reader hostgroup if it has
# been promoted to the writer hostgroup.
# If set to &#39;yes&#39;, then all writers (including backup-writers) are added to
# the read hostgroup.
# If set to &#39;no&#39;, then none of the writers (including backup-writers) are added.
# If set to &#39;backup&#39;, then only the backup-writers will be added to
# the read hostgroup.
export WRITERS_ARE_READERS=&quot;backup&quot;
</code></pre></div>
<h2 id="configuring-the-proxysql-admin-login">Configuring the ProxySQL Admin Login<a class="headerlink" href="#configuring-the-proxysql-admin-login" title="Permanent link">&para;</a></h2>
<p>Use <code>--config-file</code> to run the proxysql-admin script. The login file contains needed by proxysql-admin in an encrypted format.</p>
<p>If no credentials are specified, either on the command line or in the login-file, then the following credentials are used:</p>
<ul>
<li>
<p>The default MySQL client credentials found in my.cnf, if they connect to a ProxySQL instance.</p>
</li>
<li>
<p>If the default MySQL client credentials either do not exist or do not connect to a ProxySQL instance, then the credentials in etc/proxysql-admin.cnf are used.</p>
</li>
</ul>
<h3 id="example-of-the-proxysql-admin-file">Example of the ProxySQL Admin File<a class="headerlink" href="#example-of-the-proxysql-admin-file" title="Permanent link">&para;</a></h3>
<p>The following is an example of the unencrypted data:</p>
<div class="highlight"><pre><span></span><code># --------------------------------
# This file is constructed as a set of &quot;name=value&quot; pairs.
# Notes:
# (1) Comment lines start with &#39;#&#39; and must be on separate lines
# (2) the name part
#   - The only acceptable values are shown below in this example.
#     Other values will be ignored.
# (3) The value part:
#   - This does NOT use quotes, so any quote character will be part of the value
#   - The entire line will be used (be careful with spaces)
#
# If a value is not specified here, than the default value from the
# configuration file will be used.
# --------------------------------

# --------------------------------
# proxysql admin interface credentials.
# --------------------------------
proxysql.user=admin
proxysql.password=admin
proxysql.host=localhost
proxysql.port=6032

# --------------------------------
# PXC admin credentials for connecting to pxc-cluster-node.
# --------------------------------
cluster.user=admin
cluster.password=admin
cluster.host=localhost
cluster.port=4110

# --------------------------------
# proxysql monitoring user. proxysql admin script will create
# this user in pxc to monitor pxc-nodes.
# --------------------------------
monitor.user=monitor
monitor.password=monitor

# --------------------------------
# Application user to connect to pxc-node through proxysql
# --------------------------------
cluster-app.user=cluster_one
cluster-app.password=passw0rd
</code></pre></div>
<p>The credential information is used in the following order:</p>
<ol>
<li>
<p>Command line</p>
</li>
<li>
<p>Login-file</p>
</li>
<li>
<p>ProxySQL admin configuration file</p>
</li>
</ol>
<h3 id="creating-the-login-file">Creating the login file<a class="headerlink" href="#creating-the-login-file" title="Permanent link">&para;</a></h3>
<p>The following steps encrypt the login:</p>
<ol>
<li>
<p>Create the unencrypted data</p>
</li>
<li>
<p>Encrypt the data with the proxysql-login-file script</p>
</li>
<li>
<p>Use the login-file with proxysql-admin</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code># create the file as shown above
 $ echo &quot;monitor.user=monitor&quot; &gt; data.cnf
 $ echo &quot;monitor.password=password&quot; &gt;&gt; data.cnf

 # Choose a secret password
 $ passwd=&quot;secret&quot;


 # Method (1) : Encrypt this data with --password
 $ proxysql-login-file --in data.cnf --out login-file.cnf --password=${passwd}

 # Method (2a) : Encrypt the data with --password-file
 #               Sending the password via the command-line is insecure,
 #               it&#39;s better to use --password-file so that the
 #               password doesn&#39;t show up in the command-line
 $ proxysql-login-file --in data.cnf --out login-file.cnf \
    --password-file=&lt;(echo &quot;${passwd}&quot;)

 # Method (2b) : Running the command using sudo does not work with
                 bash&#39;s process substitution. In this case, send the
                 password by stdin is another option
 $ sudo echo &quot;${passwd}&quot; | proxysql-login-file --in data.cnf --out \
   login-file.cnf --password-file=/dev/stdin

 # Method (3) :  The script will prompt for the password
 #               if no password is provided via the command-line options.
 $ proxysql-login-file --in data.cnf --out login-file.cnf

 # Remove the unencrypted data file
 $ rm data.cnf


 # Call the proxysql-admin script with the login-file
 $ proxysql-admin --enable --login-file=login-file.cnf \
    --login-password-file=&lt;(echo &quot;${passwd}&quot;)

 # Call proxysql-status with the login-file
 $ proxysql-status --login-file=login-file.cnf \
    --login-password-file=&lt;(echo &quot;${passwd}&quot;)
</code></pre></div>
<h3 id="verifying-the-login-file">Verifying the login-file<a class="headerlink" href="#verifying-the-login-file" title="Permanent link">&para;</a></h3>
<p>You can decrypt the login-file with the proxysql-login-file-script</p>
<div class="highlight"><pre><span></span><code># Decrypt the login-file with the --decrypt option
# If --in is not used, the input data will be read from stdin
# If --out is not used, the unencrypted data will be written to stdout
$ proxysql-login-file --in login-file.cnf --password=secret --decrypt

  monitor.user=monitor
  monitor.password=password
</code></pre></div>
<h2 id="running-proxysql-admin-tool">Running <code>proxysql-admin</code> tool<a class="headerlink" href="#running-proxysql-admin-tool" title="Permanent link">&para;</a></h2>
<p>It is recommended to change default ProxySQL credentials before running ProxySQL in production.  Make sure that you provide ProxySQL location and credentials in the configuration file.</p>
<p>Provide superuser credentials for one of the Percona XtraDB Cluster nodes.  The
<code>proxysql-admin</code> script will detect other nodes in the cluster automatically.</p>
<h3 id="enable">–enable<a class="headerlink" href="#enable" title="Permanent link">&para;</a></h3>
<p>This option creates the entry for the Galera hostgroups and adds the Percona XtraDB Cluster nodes
to ProxySQL.</p>
<p>It will also add two new users into the Percona XtraDB Cluster with the USAGE
privilege; one is for monitoring the cluster nodes through ProxySQL, and another
is for connecting to the PXC Cluster node via the ProxySQL console.</p>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --enable
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>This script will assist with configuring ProxySQL for use with Percona XtraDB Cluster (currently only PXC in combination with ProxySQL is supported)

ProxySQL read/write configuration mode is singlewrite

Configuring the ProxySQL monitoring user.
ProxySQL monitor user name as per command line/config-file is monitor

User &#39;monitor&#39;@&#39;127.%&#39; has been added with USAGE privileges

Configuring the Percona XtraDB Cluster application user to connect through ProxySQL
Percona XtraDB Cluster application user name as per command line/config-file is proxysql_user

Percona XtraDB Cluster application user &#39;proxysql_user&#39;@&#39;127.%&#39; has been added with ALL privileges, this user is created for testing purposes Adding the Percona XtraDB Cluster server nodes to ProxySQL

Write node info
+-----------+--------------+-------+--------+
| hostname  | hostgroup_id | port  | weight |
+-----------+--------------+-------+--------+
| 127.0.0.1 | 10           | 26100 | 1000   |
+-----------+--------------+-------+--------+

ProxySQL configuration completed!

ProxySQL has been successfully configured to use with Percona XtraDB Cluster

You can use the following login credentials to connect your application through ProxySQL

mysql --user=proxysql_user -p --host=localhost --port=6033 --protocol=tcp

You can use the following login credentials to connect your application through
ProxySQL:

```sql
$ mysql --user=proxysql_user -p --host=127.0.0.1 --port=6033 --protocol=tcp
mysql&gt; select hostgroup_id,hostname,port,status from runtime_mysql_servers;
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+--------------+-----------+-------+--------+
| hostgroup_id | hostname  | port  | status |
+--------------+-----------+-------+--------+
| 10           | 127.0.0.1 | 25000 | ONLINE |
| 11           | 127.0.0.1 | 25100 | ONLINE |
| 11           | 127.0.0.1 | 25200 | ONLINE |
| 12           | 127.0.0.1 | 25100 | ONLINE |
| 12           | 127.0.0.1 | 25200 | ONLINE |
+--------------+-----------+-------+--------+
5 rows in set (0.00 sec)
</code></pre></div>
<div class="highlight"><pre><span></span><code>mysql&gt; SELECT * FROM mysql_galera_hostgroups<span class="se">\G</span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>writer_hostgroup: 10
backup_writer_hostgroup: 12
reader_hostgroup: 11
offline_hostgroup: 13
active: 1
max_writers: 1
writer_is_also_reader: 2
max_transactions_behind: 100
comment: NULL
1 row in set (0.00 sec)
</code></pre></div>
<p>The <code>--enable</code> command may be used together with <code>--update-cluster</code>.  If the
cluster has not been setup, then the enable function will be run.  If the
cluster has been setup, then the update cluster function will be run.</p>
<h3 id="disable">–disable<a class="headerlink" href="#disable" title="Permanent link">&para;</a></h3>
<p>This option will remove Percona XtraDB Cluster nodes from ProxySQL and stop
the ProxySQL monitoring daemon.</p>
<div class="highlight"><pre><span></span><code>$ proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --disable
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>Removing cluster application users from the ProxySQL database.
Removing cluster nodes from the ProxySQL database.
Removing query rules from the ProxySQL database if any.
Removing the cluster from the ProxySQL database.
ProxySQL configuration removed!
</code></pre></div>
<p>A specific galera cluster can be disabled by using the –writer-hg option with
<code>--disable</code>.</p>
<h3 id="adduser">–adduser<a class="headerlink" href="#adduser" title="Permanent link">&para;</a></h3>
<p>This option will aid with adding the Cluster application user to the ProxySQL
database for you</p>
<div class="highlight"><pre><span></span><code>$ proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --adduser
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>Adding Percona XtraDB Cluster application user to ProxySQL database
Enter Percona XtraDB Cluster application user name: root
Enter Percona XtraDB Cluster application user password:
Added Percona XtraDB Cluster application user to ProxySQL database!
</code></pre></div>
<h3 id="syncusers">–syncusers<a class="headerlink" href="#syncusers" title="Permanent link">&para;</a></h3>
<p>This option synchronizes user accounts currently configured in Percona XtraDB Cluster with the ProxySQL database except password-less users and admin users.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This option does not work if the Percona XtraDB Cluster user is created using the
<code>caching_sha2_password</code> plugin (used by default in Percona XtraDB Cluster 8.0). Create a mysql user using the <code>mysql_native_password</code> authentication plugin.</p>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;proxysql&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">mysql_native_password</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;$3Kr$t&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<div class="admonition admonition">
<p class="admonition-title">See also</p>
<p>MySQL Documentation: CREATE USER statement https://dev.mysql.com/doc/refman/8.0/en/create-user.html</p>
</div>
</div>
<p>It also deletes ProxySQL users not in Percona XtraDB Cluster from the ProxySQL
database.</p>
<div class="highlight"><pre><span></span><code>$ /usr/bin/proxysql-admin --syncusers
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>Syncing user accounts from Percona XtraDB Cluster to ProxySQL 
Synced Percona XtraDB Cluster users to the ProxySQL database!
</code></pre></div>
<h3 id="from-proxysql-db">From ProxySQL DB<a class="headerlink" href="#from-proxysql-db" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">mysql_users</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+---------------+
| username      |
+---------------+
| monitor       |
| one           |
| proxysql_user |
| two           |
+---------------+
4 rows in set (0.00 sec)
</code></pre></div>
<h3 id="from-pxc">From PXC<a class="headerlink" href="#from-pxc" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="k">host</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">mysql</span><span class="p">.</span><span class="k">user</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">authentication_string</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span><span class="s1">&#39;mysql.sys&#39;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+---------------+-------+
| user          | host  |
+---------------+-------+
| monitor       | 192.% |
| proxysql_user | 192.% |
| two           | %     |
| one           | %     |
+---------------+-------+
4 rows in set (0.00 sec)
</code></pre></div>
<h3 id="sync-multi-cluster-users">–sync-multi-cluster-users<a class="headerlink" href="#sync-multi-cluster-users" title="Permanent link">&para;</a></h3>
<p>This option works in the same way as <code>--syncusers</code> but it does not delete ProxySQL
users that are not present in the Percona XtraDB Cluster. It is to be used when
syncing proxysql instances that manage multiple clusters.</p>
<h3 id="add-query-rule">–add-query-rule<a class="headerlink" href="#add-query-rule" title="Permanent link">&para;</a></h3>
<p>Create query rules for synced mysql user. This is applicable only for
singlewrite mode and works only with <a href="#–syncusers"><code>--syncusers</code></a>
and <a href="#–sync-multi-cluster-users"><code>--sync-multi-cluster-users</code></a> options.</p>
<div class="highlight"><pre><span></span><code>Syncing user accounts from PXC to ProxySQL

Note : &#39;admin&#39; is in proxysql admin user list, this user cannot be added to ProxySQL
-- (For more info, see https://github.com/sysown/proxysql/issues/709)
Adding user to ProxySQL: test_query_rule
Added query rule for user: test_query_rule

Synced PXC users to the ProxySQL database!
</code></pre></div>
<h3 id="quick-demo">–quick-demo<a class="headerlink" href="#quick-demo" title="Permanent link">&para;</a></h3>
<p>This option is used to setup a dummy proxysql configuration.</p>
<div class="highlight"><pre><span></span><code>$ sudo  proxysql-admin --quick-demo
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>You have selected the dry test run mode. WARNING: This will create a test user (with all privileges) in the Percona XtraDB Cluster &amp; ProxySQL installations.
You may want to delete this user after you complete your testing!
Would you like to proceed with &#39;--quick-demo&#39; [y/n] ? y
Setting up proxysql test configuration!

Do you want to use the default ProxySQL credentials (admin:admin:6032:127.0.0.1) [y/n] ? y
Do you want to use the default Percona XtraDB Cluster credentials (root::3306:127.0.0.1) [y/n] ? n

Enter the Percona XtraDB Cluster username (super user): root
Enter the Percona XtraDB Cluster user password:
Enter the Percona XtraDB Cluster port: 25100
Enter the Percona XtraDB Cluster hostname: localhost

ProxySQL read/write configuration mode is singlewrite

Configuring ProxySQL monitoring user..

User &#39;monitor&#39;@&#39;127.%&#39; has been added with USAGE privilege
Configuring the Percona XtraDB Cluster application user to connect through ProxySQL
Percona XtraDB Cluster application user &#39;pxc_test_user&#39;@&#39;127.%&#39; has been added with ALL privileges, this user is created for testing purposes
Adding the Percona XtraDB Cluster server nodes to ProxySQL

ProxySQL configuration completed!

ProxySQL has been successfully configured to use with Percona XtraDB Cluster

You can use the following login credentials to connect your application through ProxySQL

mysql --user=pxc_test_user  --host=127.0.0.1 --port=6033 --protocol=tcp
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">hostgroup_id</span><span class="p">,</span><span class="n">hostname</span><span class="p">,</span><span class="n">port</span><span class="p">,</span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">runtime_mysql_servers</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+--------------+-----------+-------+--------+
| hostgroup_id | hostname  | port  | status |
+--------------+-----------+-------+--------+
| 10           | 127.0.0.1 | 25000 | ONLINE |
| 11           | 127.0.0.1 | 25100 | ONLINE |
| 11           | 127.0.0.1 | 25200 | ONLINE |
| 12           | 127.0.0.1 | 25100 | ONLINE |
| 12           | 127.0.0.1 | 25200 | ONLINE |
+--------------+-----------+-------+--------+
 5 rows in set (0.00 sec)
</code></pre></div>
<h3 id="update-cluster">–update-cluster<a class="headerlink" href="#update-cluster" title="Permanent link">&para;</a></h3>
<p>This option will check the Percona XtraDB Cluster to see if any new nodes have
joined the cluster.  If so, the new nodes are added to ProxySQL.  Any offline
nodes are not removed from the cluster by default.</p>
<p>If used with <code>--remove-all-servers</code>, then the server list for this configuration
will be removed before running the update cluster function.</p>
<p>A specific galera cluster can be updated by using the <code>--writer-hg</code> option
with <code>--update-cluster</code>.  Otherwise the cluster specified in the config file
will be updated.</p>
<p>If <code>--write-node</code> is used with <code>--update-cluster</code>, then that node will
be made the writer node (by giving it a larger weight), if the node is in
the server list and is ONLINE.  This should only be used if the mode is <em>singlewrite</em>.</p>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --update-cluster --writer-hg<span class="o">=</span><span class="m">10</span> --remove-all-servers
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>Removing all servers from ProxySQL
Cluster node (127.0.0.1:25000) does not exist in ProxySQL, adding to the writer hostgroup(10)
Cluster node (127.0.0.1:25100) does not exist in ProxySQL, adding to the writer hostgroup(10)
Cluster node (127.0.0.1:25200) does not exist in ProxySQL, adding to the writer hostgroup(10)
Waiting for ProxySQL to process the new nodes...

Cluster node info
+---------------+-------+-----------+-------+-----------+
| hostgroup     | hg_id | hostname  | port  | weight    |
+---------------+-------+-----------+-------+-----------+
| writer        | 10    | 127.0.0.1 | 25000 | 1000      |
| reader        | 11    | 127.0.0.1 | 25100 | 1000      |
| reader        | 11    | 127.0.0.1 | 25200 | 1000      |
| backup-writer | 12    | 127.0.0.1 | 25100 | 1000      |
| backup-writer | 12    | 127.0.0.1 | 25200 | 1000      |
+---------------+-------+-----------+------+------------+

Cluster membership updated in the ProxySQL database!
</code></pre></div>
<h3 id="is-enabled">–is-enabled<a class="headerlink" href="#is-enabled" title="Permanent link">&para;</a></h3>
<p>This option will check if a Galera cluster (specified by the writer hostgroup,
either from <code>--writer-hg</code> or from the config file) has any active entries
in the <code>mysql_galera_hostgroups</code> table in ProxySQL.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Is returned if there is</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>An entry corresponding to the writer hostgroup and is set to <em>active</em> in ProxySQL.</td>
</tr>
<tr>
<td>1</td>
<td>No entry corresponding to the writer hostgroup.</td>
</tr>
<tr>
<td>2</td>
<td>An entry corresponding to the writer hostgroup but is not active.</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --is-enabled --writer-hg<span class="o">=</span><span class="m">10</span>
</code></pre></div>
<p>If the configuration has been enabled successfully, you see the following output:</p>
<div class="highlight"><pre><span></span><code>The current configuration has been enabled and is active
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --is-enabled --writer-hg<span class="o">=</span><span class="m">20</span>
</code></pre></div>
<p>If the configuration has not been enabled, you see the following output:</p>
<div class="highlight"><pre><span></span><code>ERROR (line:2925) : The current configuration has not been enabled
</code></pre></div>
<h3 id="status">–status<a class="headerlink" href="#status" title="Permanent link">&para;</a></h3>
<p>If used with the <code>--writer-hg</code> option, this will display information about the
given Galera cluster which uses that writer hostgroup.  Otherwise it will
display information about all Galera hostgroups (and their servers) being
supported by this ProxySQL instance.</p>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --status --writer-hg<span class="o">=</span><span class="m">10</span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>mysql_galera_hostgroups row for writer-hostgroup: 10
+--------+--------+---------------+---------+--------+-------------+-----------------------+------------------+
| writer | reader | backup-writer | offline | active | max_writers | writer_is_also_reader | max_trans_behind |
+--------+--------+---------------+---------+--------+-------------+-----------------------+------------------+
| 10     | 11     | 12            | 13      | 1      | 1           | 2                     | 100              |
+--------+--------+---------------+---------+--------+-------------+-----------------------+------------------+

mysql_servers rows for this configuration
+---------------+-------+-----------+-------+--------+-----------+----------+---------+-----------+
| hostgroup     | hg_id | hostname  | port  | status | weight    | max_conn | use_ssl | gtid_port |
+---------------+-------+-----------+-------+--------+-----------+----------+---------+-----------+
| writer        | 10    | 127.0.0.1 | 25000 | ONLINE | 1000000   | 1000     | 0       | 0         |
| reader        | 11    | 127.0.0.1 | 25100 | ONLINE | 1000      | 1000     | 0       | 0         |
| reader        | 11    | 127.0.0.1 | 25200 | ONLINE | 1000      | 1000     | 0       | 0         |
| backup-writer | 12    | 127.0.0.1 | 25100 | ONLINE | 1000      | 1000     | 0       | 0         |
| backup-writer | 12    | 127.0.0.1 | 25200 | ONLINE | 1000      | 1000     | 0       | 0         |
+---------------+-------+-----------+-------+--------+-----------+----------+---------+-----------+
</code></pre></div>
<h3 id="force">–force<a class="headerlink" href="#force" title="Permanent link">&para;</a></h3>
<p>This will skip existing configuration checks with the <code>--enable</code> option in
mysql_servers, mysql_users, and mysql_galera_hostgroups tables.</p>
<h3 id="update-mysql-version">–update-mysql-version<a class="headerlink" href="#update-mysql-version" title="Permanent link">&para;</a></h3>
<p>This option will updates mysql server version (specified by the writer
hostgroup, either from <code>--writer-hg</code> or from the config file) in proxysql db
based on online writer node.</p>
<div class="highlight"><pre><span></span><code>$  sudo proxysql-admin --update-mysql-version --writer-hg<span class="o">=</span><span class="m">10</span>
</code></pre></div>
<h2 id="extra-options">Extra options<a class="headerlink" href="#extra-options" title="Permanent link">&para;</a></h2>
<h3 id="mode">–mode<a class="headerlink" href="#mode" title="Permanent link">&para;</a></h3>
<p>This option allows you to setup the read/write mode for PXC cluster nodes in
the ProxySQL database based on the hostgroup. For now, the only supported modes
are loadbal and singlewrite. singlewrite is the default mode, and it will
configure Percona XtraDB Cluster to only accept writes on a single node only.
Depending on the value of <code>--writers-are-readers</code>, the write node may
accept read requests also.</p>
<p>All other remaining nodes will be read-only and will only receive read statements.</p>
<p>With the <code>--write-node</code> option we can control which node ProxySQL will use as
the writer node. The writer node is specified as an address:port -
<strong>10.0.0.51:3306</strong> If <code>--write-node</code> is used, the writer node is given a weight of
<strong>1000000</strong> (the default weight is <strong>1000</strong>).</p>
<p>The mode loadbal on the other hand is a load balanced set of evenly weighted
read/write nodes.</p>
<h3 id="singlewrite-mode-setup"><code>singlewrite</code> mode setup:<a class="headerlink" href="#singlewrite-mode-setup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$ sudo grep <span class="s2">&quot;MODE&quot;</span> /etc/proxysql-admin.cnf
$ <span class="nb">export</span> <span class="nv">MODE</span><span class="o">=</span><span class="s2">&quot;singlewrite&quot;</span>
$ sudo proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --write-node<span class="o">=</span><span class="m">127</span>.0.0.1:25000 --enable
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>ProxySQL read/write configuration mode is singlewrite
[..]
ProxySQL configuration completed!
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">hostgroup_id</span><span class="p">,</span><span class="n">hostname</span><span class="p">,</span><span class="n">port</span><span class="p">,</span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">runtime_mysql_servers</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+--------------+-----------+-------+--------+
| hostgroup_id | hostname  | port  | status |
+--------------+-----------+-------+--------+
| 10           | 127.0.0.1 | 25000 | ONLINE |
| 11           | 127.0.0.1 | 25100 | ONLINE |
| 11           | 127.0.0.1 | 25200 | ONLINE |
| 12           | 127.0.0.1 | 25100 | ONLINE |
| 12           | 127.0.0.1 | 25200 | ONLINE |
+--------------+-----------+-------+--------+
 5 rows in set (0.00 sec)
</code></pre></div>
<h3 id="loadbal-mode-setup">loadbal mode setup<a class="headerlink" href="#loadbal-mode-setup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>$ sudo proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --mode<span class="o">=</span>loadbal --enable
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>This script will assist with configuring ProxySQL (currently only Percona XtraDB cluster in combination with ProxySQL is supported)

ProxySQL read/write configuration mode is loadbal
[..]
ProxySQL has been successfully configured to use with Percona XtraDB Cluster

You can use the following login credentials to connect your application through ProxySQL
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ mysql --user<span class="o">=</span>proxysql_user --password<span class="o">=</span>*****  --host<span class="o">=</span><span class="m">127</span>.0.0.1 --port<span class="o">=</span><span class="m">6033</span> --protocol<span class="o">=</span>tcp
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="n">hostgroup_id</span><span class="p">,</span><span class="n">hostname</span><span class="p">,</span><span class="n">port</span><span class="p">,</span><span class="n">status</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">runtime_mysql_servers</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>+--------------+-----------+-------+--------+
| hostgroup_id | hostname  | port  | status |
+--------------+-----------+-------+--------+
| 10           | 127.0.0.1 | 25000 | ONLINE |
| 10           | 127.0.0.1 | 25100 | ONLINE |
| 10           | 127.0.0.1 | 25200 | ONLINE |
+--------------+-----------+-------+--------+
3 rows in set (0.01 sec)
</code></pre></div>
<h3 id="node-check-interval">–node-check-interval<a class="headerlink" href="#node-check-interval" title="Permanent link">&para;</a></h3>
<p>This option configures the interval for the cluster node health monitoring by
ProxySQL (in milliseconds). This is a global variable and will be used by all
clusters that are being served by this ProxySQL instance. This can only be
used with <code>--enable</code>.</p>
<div class="highlight"><pre><span></span><code>$ proxysql-admin --config-file<span class="o">=</span>/etc/proxysql-admin.cnf --node-check-interval<span class="o">=</span><span class="m">5000</span> --enable
</code></pre></div>
<h3 id="write-node">–write-node<a class="headerlink" href="#write-node" title="Permanent link">&para;</a></h3>
<p>This option is used to choose which node will be the writer node when the mode
is singlewrite.  This option can be used with <code>--enable</code> and <code>--update-cluster</code>.</p>
<p>A single IP address and port combination is expected.  For instance,
“&ndash;write-node=127.0.0.1:3306”</p>
<h2 id="proxysql-status">ProxySQL Status<a class="headerlink" href="#proxysql-status" title="Permanent link">&para;</a></h2>
<p>Simple script to dump ProxySQL config and stats</p>
<div class="highlight"><pre><span></span><code>$ proxysql-status admin admin <span class="m">127</span>.0.0.1 <span class="m">6032</span>
</code></pre></div>
<p>The default behavior is to display all tables and files. By using the following
options, you can retrieve more specific information:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Use to display</th>
</tr>
</thead>
<tbody>
<tr>
<td>&ndash;files</td>
<td>The contents of proxysql-admin related files</td>
</tr>
<tr>
<td>&ndash;main</td>
<td>Main tables (both on-disk and runtime)</td>
</tr>
<tr>
<td>&ndash;monitor</td>
<td>Monitor tables</td>
</tr>
<tr>
<td>&ndash;runtime</td>
<td>Runtime-related data (implies –main)</td>
</tr>
<tr>
<td>&ndash;stats</td>
<td>Stats tables</td>
</tr>
<tr>
<td>&ndash;table=<table_name></td>
<td>Only tables that contain the table name (this is a case-sensitive match)</td>
</tr>
<tr>
<td>&ndash;with-stats-reset</td>
<td><code>_reset</code> tables, by default _reset tables will not be queried.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If no credentials are specified the credentials in <code>/etc/proxysql-admin.cnf</code> are used.</p>
</div>

                
<div class="md-relbar2__inner md-grid">
<div class="md-content">
  <article class="md-content__inner md-typeset" role="main">    
    <h4>Contact Us </h4>
    <p>For free technical help, visit the Percona <a class="reference external" href="https://forums.percona.com/c/mysql-mariadb/percona-xtradb-cluster-8-x/37" target="_blank">Community Forum</a>.<br>
      <p>To report bugs or submit feature requests, open a <a class="reference external" href="https://jira.percona.com/projects/PXC/issues" target="_blank">JIRA</a> ticket.<br>
       <p>For paid <a class="reference external" href="https://www.percona.com/services/support"> support </a> and <a class="reference external" href="https://www.percona.com/services/managed-services"> managed </a> or <a class="reference external" href="https://www.percona.com/services/consulting">consulting services </a>, contact <a class="reference external" href="https://www.percona.com/about-percona/contact" target="_blank">Percona Sales</a>.</p>
 </article>
</div>
</div>

                <!-- Last update of source file -->
                
                  
                    <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2022-08-16
    
  </small>
</div>
                  
                
              
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="proxysql.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Load balancing with ProxySQL" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Load balancing with ProxySQL
            </div>
          </div>
        </a>
      
      
        
        <a href="virt_sandbox.html" class="md-footer__link md-footer__link--next" aria-label="Next: Setting up a testing environment with ProxySQL" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Setting up a testing environment with ProxySQL
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Percona LLC, &#169; 2022
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.highlight", "navigation.top", "content.tabs.link"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="../js/version-select.js"></script>
      
    
  </body>
</html>